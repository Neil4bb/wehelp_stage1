<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>Member Page</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/script.js"></script>
</head>    
<body>
    <header>
        <h1>歡迎光臨，這是會員頁</h1>
    </header>
    <main>
        <div class="card">
            <h3>{{banana}}，歡迎登入系統</h3>
            <a href="/logout">登出系統</a>

            <hr>

            <h3>快來留言吧</h3>

            <form id="msg-form" method="post" action="/createMessage">
                <div class="field">
                    <label>內容</label>
                    <input type="text" name="message">
                </div>            

                <div class="form-footer">
                    <button type="submit">送出</button>
                </div>
            </form>

            <hr>
            <ul>
                {% for m in messages %}
                    <li>{{m.name}} : {{m.content}}

                        {% if m.m_id == user_id %}
                        <form action="/deleteMessage" method="post" 
                        style="display:inline;" onsubmit="return confirm('確定刪除這則留言嗎?');">
                            <!-- 傳 message.id 給後端 -->
                            <input type="hidden" name="message_id" value="{{m.msg_id}}">
                            <input type="hidden" name="user_id" value="{{m.m_id}}">
                            <button type="submit">X</button>
                        </form>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </div>
    </main>
</body>
</html>